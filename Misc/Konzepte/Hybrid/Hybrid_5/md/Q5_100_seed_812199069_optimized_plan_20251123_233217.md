# Optimized Execution Plan: Q5_100_seed_812199069

## Strategy: Greedy Pattern Matching (Largest First)

## Overview
- Total operators in query: 20
- Total predictions needed: 3
- Pattern-based predictions: 3
- Operator-based predictions: 0
- Reduction: 17 operators covered by patterns

## Execution Steps (Top-Down Order)

### Step 1

**Type:** Pattern Model
**Pattern Hash:** ddb1e0cae6d1724880dfc741b2555585
**Pattern String:** Sort → Aggregate → Gather Merge (Outer) (Outer)
**Pattern Length:** 3
**Root Operator:** Sort (depth 0, node_id 6901)
**Consumed Nodes:** 3

**Pattern Structure:**
- Depth 0: Sort (nan) (node_id 6901)
- Depth 1: Aggregate (Outer) (node_id 6902)
- Depth 2: Gather Merge (Outer) (node_id 6903)

**Pass-Through Logic:**

*Required Child Features:*
- GatherMerge_Outer: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Root node - no pass-through to parent


### Step 2

**Type:** Pattern Model
**Pattern Hash:** 3754655cfe1a94f82fbddab4e376c57d
**Pattern String:** Aggregate → Sort (Outer)
**Pattern Length:** 2
**Root Operator:** Aggregate (depth 3, node_id 6904)
**Consumed Nodes:** 2

**Pattern Structure:**
- Depth 3: Aggregate (Outer) (node_id 6904)
- Depth 4: Sort (Outer) (node_id 6905)

**Pass-Through Logic:**

*Required Child Features:*
- Sort_Outer: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)


### Step 3

**Type:** Pattern Model
**Pattern Hash:** a95bee4e9ae59bc7fb7a48a1a7973a31
**Pattern String:** Hash Join → [Nested Loop → [Hash Join → [Seq Scan (Outer), Hash → Hash Join → [Seq Scan (Outer), Hash → Hash Join → [Seq Scan (Outer), Hash → Seq Scan (Outer) (Inner)] (Outer) (Inner)] (Outer) (Inner)] (Outer), Index Scan (Inner)] (Outer), Hash → Seq Scan (Outer) (Inner)]
**Pattern Length:** 9
**Root Operator:** Hash Join (depth 5, node_id 6906)
**Consumed Nodes:** 15

**Pattern Structure:**
- Depth 5: Hash Join (Outer) (node_id 6906)
- Depth 6: Nested Loop (Outer) (node_id 6907)
- Depth 7: Hash Join (Outer) (node_id 6908)
- Depth 8: Seq Scan (Outer) (node_id 6909)
- Depth 8: Hash (Inner) (node_id 6910)
- Depth 9: Hash Join (Outer) (node_id 6911)
- Depth 10: Seq Scan (Outer) (node_id 6912)
- Depth 10: Hash (Inner) (node_id 6913)
- Depth 11: Hash Join (Outer) (node_id 6914)
- Depth 12: Seq Scan (Outer) (node_id 6915)
- Depth 12: Hash (Inner) (node_id 6916)
- Depth 13: Seq Scan (Outer) (node_id 6917)
- Depth 7: Index Scan (Inner) (node_id 6918)
- Depth 6: Hash (Inner) (node_id 6919)
- Depth 7: Seq Scan (Outer) (node_id 6920)

**Pass-Through Logic:**

*Required Child Features:* None (all pattern leafs are plan leafs)

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)

