# Optimized Execution Plan: Q18_100_seed_812199069

## Strategy: Greedy Pattern Matching (Largest First)

## Overview
- Total operators in query: 16
- Total predictions needed: 13
- Pattern-based predictions: 2
- Operator-based predictions: 11
- Reduction: 3 operators covered by patterns

## Execution Steps (Top-Down Order)

### Step 1

**Type:** Pattern Model
**Pattern Hash:** 7bcfec2259bf8f077d86cc017740ebd6
**Pattern String:** Limit → Sort → Aggregate (Outer) (Outer)
**Pattern Length:** 3
**Root Operator:** Limit (depth 0, node_id 28820)
**Consumed Nodes:** 3

**Pattern Structure:**
- Depth 0: Limit (nan) (node_id 28820)
- Depth 1: Sort (Outer) (node_id 28821)
- Depth 2: Aggregate (Outer) (node_id 28822)

**Pass-Through Logic:**

*Required Child Features:*
- Aggregate_Outer: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Root node - no pass-through to parent


### Step 2

**Type:** Operator Model
**Operator:** Gather Merge (depth 3, node_id 28823)

**Pass-Through Logic:**

*Required Child Features:*
- IncrementalSort_Outer: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)


### Step 3

**Type:** Operator Model
**Operator:** Incremental Sort (depth 4, node_id 28824)

**Pass-Through Logic:**

*Required Child Features:*
- NestedLoop_Outer: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)


### Step 4

**Type:** Operator Model
**Operator:** Nested Loop (depth 5, node_id 28825)

**Pass-Through Logic:**

*Required Child Features:*
- MergeJoin_Outer: rt1, rt2, st1, st2
- IndexScan_Inner: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)


### Step 5

**Type:** Operator Model
**Operator:** Merge Join (depth 6, node_id 28826)

**Pass-Through Logic:**

*Required Child Features:*
- Sort_Outer: rt1, rt2, st1, st2
- Sort_Inner: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)


### Step 6

**Type:** Operator Model
**Operator:** Index Scan (depth 6, node_id 28835)

**Pass-Through Logic:**

*Required Child Features:* None (leaf operator)

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Inner relationship)


### Step 7

**Type:** Pattern Model
**Pattern Hash:** 3e2d5a00246ff56483c16003698d4917
**Pattern String:** Sort → Hash Join (Outer)
**Pattern Length:** 2
**Root Operator:** Sort (depth 7, node_id 28827)
**Consumed Nodes:** 2

**Pattern Structure:**
- Depth 7: Sort (Outer) (node_id 28827)
- Depth 8: Hash Join (Outer) (node_id 28828)

**Pass-Through Logic:**

*Required Child Features:*
- HashJoin_Outer: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)


### Step 8

**Type:** Operator Model
**Operator:** Sort (depth 7, node_id 28833)

**Pass-Through Logic:**

*Required Child Features:*
- SeqScan_Outer: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Inner relationship)


### Step 9

**Type:** Operator Model
**Operator:** Seq Scan (depth 8, node_id 28834)

**Pass-Through Logic:**

*Required Child Features:* None (leaf operator)

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)


### Step 10

**Type:** Operator Model
**Operator:** Seq Scan (depth 9, node_id 28829)

**Pass-Through Logic:**

*Required Child Features:* None (leaf operator)

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)


### Step 11

**Type:** Operator Model
**Operator:** Hash (depth 9, node_id 28830)

**Pass-Through Logic:**

*Required Child Features:*
- Aggregate_Outer: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Inner relationship)


### Step 12

**Type:** Operator Model
**Operator:** Aggregate (depth 10, node_id 28831)

**Pass-Through Logic:**

*Required Child Features:*
- IndexScan_Outer: rt1, rt2, st1, st2

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)


### Step 13

**Type:** Operator Model
**Operator:** Index Scan (depth 11, node_id 28832)

**Pass-Through Logic:**

*Required Child Features:* None (leaf operator)

*Emitted Targets:*
- actual_startup_time (st)
- actual_total_time (rt)

*Pass-Through Mapping:* Emitted targets become child features for parent: st -> st1/st2, rt -> rt1/rt2 (based on Outer relationship)

