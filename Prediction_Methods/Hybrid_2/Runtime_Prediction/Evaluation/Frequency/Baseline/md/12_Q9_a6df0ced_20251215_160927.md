# Query Prediction Report (Hybrid_2)

**Query:** Q9_111_seed_902443410
**Timestamp:** 2025-12-15 16:09:27

## Pattern Assignments

**Total Patterns Matched:** 3

| Root Node | Pattern Hash | Pattern String |
|-----------|--------------|----------------|
| 16868 | 1d35fb978b37... | Sort -> Aggregate (Outer) |
| 16871 | 7542faeb20f8... | Aggregate -> Hash Join -> [Seq Scan (Outer), Hash -> Hash Join (Outer) (Inner)] (Outer) |
| 16879 | 2e0f44eff91c... | Hash Join -> [Nested Loop (Outer), Hash (Inner)] |

## Query Tree

```
Node 16868 (Sort) [PATTERN ROOT] - ROOT
  Node 16869 (Aggregate) [consumed]
    Node 16870 (Gather)
      Node 16871 (Aggregate) [PATTERN ROOT]
        Node 16872 (Hash Join) [consumed]
          Node 16873 (Seq Scan) [consumed]
          Node 16874 (Hash) [consumed]
            Node 16875 (Hash Join) [consumed]
              Node 16876 (Seq Scan)
              Node 16877 (Hash)
                Node 16878 (Hash Join)
                  Node 16879 (Hash Join) [PATTERN ROOT]
                    Node 16880 (Nested Loop) [consumed]
                      Node 16881 (Seq Scan)
                      Node 16882 (Index Scan)
                    Node 16883 (Hash) [consumed]
                      Node 16884 (Seq Scan)
                  Node 16885 (Hash)
                    Node 16886 (Seq Scan)
```

## Prediction Chain (Bottom-Up)

### Step 1 (depth 11): Operator Fallback

- **Node:** 16881 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.36, rt=38.01

### Step 2 (depth 11): Operator Fallback

- **Node:** 16882 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.07, rt=0.07

### Step 3 (depth 11): Operator Fallback

- **Node:** 16884 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.05, rt=8.20

### Step 4 (depth 10): Operator Fallback

- **Node:** 16886 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.05, rt=4.59

### Step 5 (depth 9): Pattern Match

- **Pattern:** Hash Join -> [Nested Loop (Outer), Hash (Inner)]
- **Hash:** 2e0f44eff91c745724a56159cf7e0d6f
- **Root:** Node 16879 (Hash Join)
- **Consumed Children:** Node 16880 (Nested Loop), Node 16883 (Hash)
- **Output:** st=6.33, rt=1006.46

### Step 6 (depth 9): Operator Fallback

- **Node:** 16885 (Hash)
- **Reason:** No pattern match
- **Output:** st=11.57, rt=11.57

### Step 7 (depth 8): Operator Fallback

- **Node:** 16878 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=25.46, rt=954.64

### Step 8 (depth 7): Operator Fallback

- **Node:** 16876 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.73, rt=678.67

### Step 9 (depth 7): Operator Fallback

- **Node:** 16877 (Hash)
- **Reason:** No pattern match
- **Output:** st=165.57, rt=165.57

### Step 10 (depth 3): Pattern Match

- **Pattern:** Aggregate -> Hash Join -> [Seq Scan (Outer), Hash -> Hash Join (Outer) (Inner)] (Outer)
- **Hash:** 7542faeb20f835fcecccf4efc5140cb4
- **Root:** Node 16871 (Aggregate)
- **Consumed Children:** Node 16872 (Hash Join), Node 16873 (Seq Scan), Node 16874 (Hash), Node 16875 (Hash Join)
- **Output:** st=1256.98, rt=1257.46

### Step 11 (depth 2): Operator Fallback

- **Node:** 16870 (Gather)
- **Reason:** No pattern match
- **Output:** st=574.31, rt=1023.21

### Step 12 (depth 0): Pattern Match

- **Pattern:** Sort -> Aggregate (Outer)
- **Hash:** 1d35fb978b379d4a820897907e56ab7b
- **Root:** Node 16868 (Sort)
- **Consumed Children:** Node 16869 (Aggregate)
- **Output:** st=1126.88, rt=1128.04

## Prediction Results

| Node | Type | Depth | Pred Type | Actual RT | Pred RT | MRE (%) |
|------|------|-------|-----------|-----------|---------|---------|
| 16868 | Sort | 0 | pattern | 1280.36 | 1128.04 | 11.9 |
| 16870 | Gather | 2 | operator | 1278.94 | 1023.21 | 20.0 |
| 16871 | Aggregate | 3 | pattern | 1263.05 | 1257.46 | 0.4 |
| 16876 | Seq Scan | 7 | operator | 689.96 | 678.67 | 1.6 |
| 16877 | Hash | 7 | operator | 217.33 | 165.57 | 23.8 |
| 16878 | Hash Join | 8 | operator | 215.08 | 954.64 | 343.9 |
| 16879 | Hash Join | 9 | pattern | 199.50 | 1006.46 | 404.5 |
| 16885 | Hash | 9 | operator | 14.70 | 11.57 | 21.3 |
| 16886 | Seq Scan | 10 | operator | 14.69 | 4.59 | 68.7 |
| 16881 | Seq Scan | 11 | operator | 25.76 | 38.01 | 47.5 |
| 16882 | Index Scan | 11 | operator | 0.06 | 0.07 | 11.6 |
| 16884 | Seq Scan | 11 | operator | 4.46 | 8.20 | 83.6 |
