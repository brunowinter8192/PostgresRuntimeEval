# Query Prediction Report (Hybrid_2)

**Query:** Q9_102_seed_828607131
**Timestamp:** 2025-12-10 19:29:47

## Pattern Assignments

**Total Patterns Matched:** 3

| Root Node | Pattern Hash | Pattern String |
|-----------|--------------|----------------|
| 16688 | 1d35fb978b37... | Sort -> Aggregate (Outer) |
| 16690 | 634cdbe24fda... | Gather -> Aggregate (Outer) |
| 16692 | bd9dfa7bb8f3... | Nested Loop -> [Hash Join -> [Seq Scan (Outer), Hash -> Hash Join (Outer) (Inner)] (Outer), Index Scan (Inner)] |

## Query Tree

```
Node 16688 (Sort) [PATTERN ROOT] - ROOT
  Node 16689 (Aggregate) [consumed]
    Node 16690 (Gather) [PATTERN ROOT]
      Node 16691 (Aggregate) [consumed]
        Node 16692 (Nested Loop) [PATTERN ROOT]
          Node 16693 (Hash Join) [consumed]
            Node 16694 (Seq Scan) [consumed]
            Node 16695 (Hash) [consumed]
              Node 16696 (Hash Join) [consumed]
                Node 16697 (Hash Join)
                  Node 16698 (Nested Loop)
                    Node 16699 (Seq Scan)
                    Node 16700 (Index Scan)
                  Node 16701 (Hash)
                    Node 16702 (Seq Scan)
                Node 16703 (Hash)
                  Node 16704 (Seq Scan)
          Node 16705 (Index Scan) [consumed]
```

## Prediction Chain (Bottom-Up)

### Step 1 (depth 10): Operator Fallback

- **Node:** 16699 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.39, rt=36.29

### Step 2 (depth 10): Operator Fallback

- **Node:** 16700 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.07, rt=0.07

### Step 3 (depth 10): Operator Fallback

- **Node:** 16702 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.05, rt=7.26

### Step 4 (depth 9): Operator Fallback

- **Node:** 16698 (Nested Loop)
- **Reason:** No pattern match
- **Output:** st=16.21, rt=1059.79

### Step 5 (depth 9): Operator Fallback

- **Node:** 16701 (Hash)
- **Reason:** No pattern match
- **Output:** st=11.45, rt=11.45

### Step 6 (depth 9): Operator Fallback

- **Node:** 16704 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.06, rt=3.81

### Step 7 (depth 8): Operator Fallback

- **Node:** 16697 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=29.85, rt=1027.26

### Step 8 (depth 8): Operator Fallback

- **Node:** 16703 (Hash)
- **Reason:** No pattern match
- **Output:** st=10.36, rt=10.36

### Step 9 (depth 4): Pattern Match

- **Pattern:** Nested Loop -> [Hash Join -> [Seq Scan (Outer), Hash -> Hash Join (Outer) (Inner)] (Outer), Index Scan (Inner)]
- **Hash:** bd9dfa7bb8f3b0473cdfb5cd4277dc3a
- **Root:** Node 16692 (Nested Loop)
- **Consumed Children:** Node 16693 (Hash Join), Node 16694 (Seq Scan), Node 16695 (Hash), Node 16696 (Hash Join), Node 16705 (Index Scan)
- **Output:** st=108.35, rt=1148.33

### Step 10 (depth 2): Pattern Match

- **Pattern:** Gather -> Aggregate (Outer)
- **Hash:** 634cdbe24fda21720ccd3dc746d5c979
- **Root:** Node 16690 (Gather)
- **Consumed Children:** Node 16691 (Aggregate)
- **Output:** st=900.99, rt=907.87

### Step 11 (depth 0): Pattern Match

- **Pattern:** Sort -> Aggregate (Outer)
- **Hash:** 1d35fb978b379d4a820897907e56ab7b
- **Root:** Node 16688 (Sort)
- **Consumed Children:** Node 16689 (Aggregate)
- **Output:** st=1124.15, rt=1127.07

## Prediction Results

| Node | Type | Depth | Pred Type | Actual RT | Pred RT | MRE (%) |
|------|------|-------|-----------|-----------|---------|---------|
| 16688 | Sort | 0 | pattern | 1180.99 | 1127.07 | 4.6 |
| 16690 | Gather | 2 | pattern | 1179.79 | 907.87 | 23.0 |
| 16692 | Nested Loop | 4 | pattern | 1135.28 | 1148.33 | 1.1 |
| 16697 | Hash Join | 8 | operator | 153.53 | 1027.26 | 569.1 |
| 16703 | Hash | 8 | operator | 13.76 | 10.36 | 24.7 |
| 16698 | Nested Loop | 9 | operator | 149.31 | 1059.79 | 609.8 |
| 16701 | Hash | 9 | operator | 2.16 | 11.45 | 430.1 |
| 16704 | Seq Scan | 9 | operator | 13.75 | 3.81 | 72.3 |
| 16699 | Seq Scan | 10 | operator | 19.83 | 36.29 | 83.0 |
| 16700 | Index Scan | 10 | operator | 0.07 | 0.07 | 5.1 |
| 16702 | Seq Scan | 10 | operator | 1.71 | 7.26 | 325.0 |
