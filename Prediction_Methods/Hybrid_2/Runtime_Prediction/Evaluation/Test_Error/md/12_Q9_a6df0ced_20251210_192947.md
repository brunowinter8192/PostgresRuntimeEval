# Query Prediction Report (Hybrid_2)

**Query:** Q9_100_seed_812199069
**Timestamp:** 2025-12-10 19:29:47

## Pattern Assignments

**Total Patterns Matched:** 5

| Root Node | Pattern Hash | Pattern String |
|-----------|--------------|----------------|
| 16651 | 1d35fb978b37... | Sort -> Aggregate (Outer) |
| 16653 | 634cdbe24fda... | Gather -> Aggregate (Outer) |
| 16655 | 9a16eb415b3a... | Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Hash Join -> [Nested Loop (Outer), Hash (Inner)] (Outer), Hash -> Seq Scan (Outer) (Inner)] (Outer) (Inner)] (Outer) (Inner)] |
| 16657 | 06fbc7948bfd... | Hash -> Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Hash Join (Outer), Hash (Inner)] (Outer) (Inner)] (Outer) |
| 16658 | 49ae7e421501... | Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Hash Join -> [Nested Loop (Outer), Hash (Inner)] (Outer), Hash -> Seq Scan (Outer) (Inner)] (Outer) (Inner)] |

## Query Tree

```
Node 16651 (Sort) [PATTERN ROOT] - ROOT
  Node 16652 (Aggregate) [consumed]
    Node 16653 (Gather) [PATTERN ROOT]
      Node 16654 (Aggregate) [consumed]
        Node 16655 (Hash Join) [PATTERN ROOT]
          Node 16656 (Seq Scan) [consumed]
          Node 16657 (Hash) [PATTERN ROOT]
            Node 16658 (Hash Join) [PATTERN ROOT]
              Node 16659 (Seq Scan) [consumed]
              Node 16660 (Hash) [consumed]
                Node 16661 (Hash Join) [consumed]
                  Node 16662 (Hash Join) [consumed]
                    Node 16663 (Nested Loop) [consumed]
                      Node 16664 (Seq Scan)
                      Node 16665 (Index Scan)
                    Node 16666 (Hash) [consumed]
                      Node 16667 (Seq Scan)
                  Node 16668 (Hash) [consumed]
                    Node 16669 (Seq Scan) [consumed]
```

## Prediction Chain (Bottom-Up)

### Step 1 (depth 11): Operator Fallback

- **Node:** 16664 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.38, rt=35.79

### Step 2 (depth 11): Operator Fallback

- **Node:** 16665 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.07, rt=0.07

### Step 3 (depth 11): Operator Fallback

- **Node:** 16667 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.05, rt=7.26

### Step 4 (depth 6): Pattern Match

- **Pattern:** Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Hash Join -> [Nested Loop (Outer), Hash (Inner)] (Outer), Hash -> Seq Scan (Outer) (Inner)] (Outer) (Inner)]
- **Hash:** 49ae7e421501d613fd0ca6e92ef2ea4a
- **Root:** Node 16658 (Hash Join)
- **Consumed Children:** Node 16659 (Seq Scan), Node 16660 (Hash), Node 16661 (Hash Join), Node 16662 (Hash Join), Node 16663 (Nested Loop), Node 16666 (Hash), Node 16668 (Hash), Node 16669 (Seq Scan)
- **Output:** st=182.28, rt=980.05

### Step 5 (depth 5): Pattern Match

- **Pattern:** Hash -> Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Hash Join (Outer), Hash (Inner)] (Outer) (Inner)] (Outer)
- **Hash:** 06fbc7948bfdbb823a43beb87178bb8c
- **Root:** Node 16657 (Hash)
- **Consumed Children:** Node 16658 (Hash Join), Node 16659 (Seq Scan), Node 16660 (Hash), Node 16661 (Hash Join), Node 16662 (Hash Join), Node 16668 (Hash)
- **Output:** st=1033.89, rt=1033.90

### Step 6 (depth 4): Pattern Match

- **Pattern:** Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Hash Join -> [Nested Loop (Outer), Hash (Inner)] (Outer), Hash -> Seq Scan (Outer) (Inner)] (Outer) (Inner)] (Outer) (Inner)]
- **Hash:** 9a16eb415b3aa94acc486c05444ec7b1
- **Root:** Node 16655 (Hash Join)
- **Consumed Children:** Node 16656 (Seq Scan), Node 16657 (Hash), Node 16658 (Hash Join), Node 16659 (Seq Scan), Node 16660 (Hash), Node 16661 (Hash Join), Node 16662 (Hash Join), Node 16663 (Nested Loop), Node 16666 (Hash), Node 16668 (Hash), Node 16669 (Seq Scan)
- **Output:** st=1034.76, rt=1227.78

### Step 7 (depth 2): Pattern Match

- **Pattern:** Gather -> Aggregate (Outer)
- **Hash:** 634cdbe24fda21720ccd3dc746d5c979
- **Root:** Node 16653 (Gather)
- **Consumed Children:** Node 16654 (Aggregate)
- **Output:** st=913.67, rt=920.59

### Step 8 (depth 0): Pattern Match

- **Pattern:** Sort -> Aggregate (Outer)
- **Hash:** 1d35fb978b379d4a820897907e56ab7b
- **Root:** Node 16651 (Sort)
- **Consumed Children:** Node 16652 (Aggregate)
- **Output:** st=1141.34, rt=1144.31

## Prediction Results

| Node | Type | Depth | Pred Type | Actual RT | Pred RT | MRE (%) |
|------|------|-------|-----------|-----------|---------|---------|
| 16651 | Sort | 0 | pattern | 1289.03 | 1144.31 | 11.2 |
| 16653 | Gather | 2 | pattern | 1288.13 | 920.59 | 28.5 |
| 16655 | Hash Join | 4 | pattern | 1239.63 | 1227.78 | 1.0 |
| 16657 | Hash | 5 | pattern | 1042.87 | 1033.90 | 0.9 |
| 16658 | Hash Join | 6 | pattern | 1024.55 | 980.05 | 4.3 |
| 16664 | Seq Scan | 11 | operator | 29.57 | 35.79 | 21.0 |
| 16665 | Index Scan | 11 | operator | 0.06 | 0.07 | 19.8 |
| 16667 | Seq Scan | 11 | operator | 2.10 | 7.26 | 246.0 |
