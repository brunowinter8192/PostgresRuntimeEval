# Query Prediction Report (Hybrid_2)

**Query:** Q18_109_seed_886035348
**Timestamp:** 2025-12-15 16:09:29

## Pattern Assignments

**Total Patterns Matched:** 1

| Root Node | Pattern Hash | Pattern String |
|-----------|--------------|----------------|
| 28964 | 267d3d4e6cbf... | Limit -> Sort -> Aggregate -> Gather Merge -> Incremental Sort -> Nested Loop -> [Merge Join -> [Sort -> Hash Join -> [Seq Scan (Outer), Hash -> Aggregate (Outer) (Inner)] (Outer) (Outer), Sort -> Seq Scan (Outer) (Inner)] (Outer), Index Scan (Inner)] (Outer) (Outer) (Outer) (Outer) (Outer) |

## Query Tree

```
Node 28964 (Limit) [PATTERN ROOT] - ROOT
  Node 28965 (Sort) [consumed]
    Node 28966 (Aggregate) [consumed]
      Node 28967 (Gather Merge) [consumed]
        Node 28968 (Incremental Sort) [consumed]
          Node 28969 (Nested Loop) [consumed]
            Node 28970 (Merge Join) [consumed]
              Node 28971 (Sort) [consumed]
                Node 28972 (Hash Join) [consumed]
                  Node 28973 (Seq Scan) [consumed]
                  Node 28974 (Hash) [consumed]
                    Node 28975 (Aggregate) [consumed]
                      Node 28976 (Index Scan)
              Node 28977 (Sort) [consumed]
                Node 28978 (Seq Scan) [consumed]
            Node 28979 (Index Scan) [consumed]
```

## Prediction Chain (Bottom-Up)

### Step 1 (depth 11): Operator Fallback

- **Node:** 28976 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.08, rt=0.03

### Step 2 (depth 0): Pattern Match

- **Pattern:** Limit -> Sort -> Aggregate -> Gather Merge -> Incremental Sort -> Nested Loop -> [Merge Join -> [Sort -> Hash Join -> [Seq Scan (Outer), Hash -> Aggregate (Outer) (Inner)] (Outer) (Outer), Sort -> Seq Scan (Outer) (Inner)] (Outer), Index Scan (Inner)] (Outer) (Outer) (Outer) (Outer) (Outer)
- **Hash:** 267d3d4e6cbf10ceab1785c594b8f2f2
- **Root:** Node 28964 (Limit)
- **Consumed Children:** Node 28965 (Sort), Node 28966 (Aggregate), Node 28967 (Gather Merge), Node 28968 (Incremental Sort), Node 28969 (Nested Loop), Node 28970 (Merge Join), Node 28971 (Sort), Node 28972 (Hash Join), Node 28973 (Seq Scan), Node 28974 (Hash), Node 28975 (Aggregate), Node 28977 (Sort), Node 28978 (Seq Scan), Node 28979 (Index Scan)
- **Output:** st=3043.38, rt=3050.57

## Prediction Results

| Node | Type | Depth | Pred Type | Actual RT | Pred RT | MRE (%) |
|------|------|-------|-----------|-----------|---------|---------|
| 28964 | Limit | 0 | pattern | 3030.15 | 3050.57 | 0.7 |
| 28976 | Index Scan | 11 | operator | 2116.01 | 0.03 | 100.0 |
