# Query Prediction Report (Hybrid_2)

**Query:** Q9_109_seed_886035348
**Timestamp:** 2026-01-18 01:39:41

## Pattern Assignments

**Total Patterns Matched:** 3

| Root Node | Pattern Hash | Pattern String |
|-----------|--------------|----------------|
| 16814 | 4d81a89df5e9... | Sort -> Aggregate -> Gather -> Aggregate -> Nested Loop -> [Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Hash Join (Outer), Hash (Inner)] (Outer) (Inner)] (Outer), Index Scan (Inner)] (Outer) (Outer) (Outer) (Outer) |
| 16824 | c53c43965386... | Nested Loop -> [Seq Scan (Outer), Index Scan (Inner)] |
| 16827 | 3aab37bea1a8... | Hash -> Seq Scan (Outer) |

## Query Tree

```
Node 16814 (Sort) [PATTERN ROOT] - ROOT
  Node 16815 (Aggregate) [consumed]
    Node 16816 (Gather) [consumed]
      Node 16817 (Aggregate) [consumed]
        Node 16818 (Nested Loop) [consumed]
          Node 16819 (Hash Join) [consumed]
            Node 16820 (Seq Scan) [consumed]
            Node 16821 (Hash) [consumed]
              Node 16822 (Hash Join) [consumed]
                Node 16823 (Hash Join) [consumed]
                  Node 16824 (Nested Loop) [PATTERN ROOT]
                    Node 16825 (Seq Scan) [consumed]
                    Node 16826 (Index Scan) [consumed]
                  Node 16827 (Hash) [PATTERN ROOT]
                    Node 16828 (Seq Scan) [consumed]
                Node 16829 (Hash) [consumed]
                  Node 16830 (Seq Scan)
          Node 16831 (Index Scan) [consumed]
```

## Prediction Chain (Bottom-Up)

### Step 1 (depth 9): Pattern Match

- **Pattern:** Nested Loop -> [Seq Scan (Outer), Index Scan (Inner)]
- **Hash:** c53c43965386239f53c764b9a60720dd
- **Root:** Node 16824 (Nested Loop)
- **Consumed Children:** Node 16825 (Seq Scan), Node 16826 (Index Scan)
- **Output:** st=0.58, rt=649.48

### Step 2 (depth 9): Pattern Match

- **Pattern:** Hash -> Seq Scan (Outer)
- **Hash:** 3aab37bea1a884da206eb32f2c1ae5ba
- **Root:** Node 16827 (Hash)
- **Consumed Children:** Node 16828 (Seq Scan)
- **Output:** st=0.77, rt=0.77

### Step 3 (depth 9): Operator Fallback

- **Node:** 16830 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.06, rt=3.86

### Step 4 (depth 0): Pattern Match

- **Pattern:** Sort -> Aggregate -> Gather -> Aggregate -> Nested Loop -> [Hash Join -> [Seq Scan (Outer), Hash -> Hash Join -> [Hash Join (Outer), Hash (Inner)] (Outer) (Inner)] (Outer), Index Scan (Inner)] (Outer) (Outer) (Outer) (Outer)
- **Hash:** 4d81a89df5e923042f3e4d0868013223
- **Root:** Node 16814 (Sort)
- **Consumed Children:** Node 16815 (Aggregate), Node 16816 (Gather), Node 16817 (Aggregate), Node 16818 (Nested Loop), Node 16819 (Hash Join), Node 16820 (Seq Scan), Node 16821 (Hash), Node 16822 (Hash Join), Node 16823 (Hash Join), Node 16829 (Hash), Node 16831 (Index Scan)
- **Output:** st=1189.03, rt=1194.69

## Prediction Results

| Node | Type | Depth | Pred Type | Actual RT | Pred RT | MRE (%) |
|------|------|-------|-----------|-----------|---------|---------|
| 16814 | Sort | 0 | pattern | 1253.92 | 1194.69 | 4.7 |
| 16824 | Nested Loop | 9 | pattern | 151.06 | 649.48 | 329.9 |
| 16827 | Hash | 9 | pattern | 3.56 | 0.77 | 78.3 |
| 16830 | Seq Scan | 9 | operator | 14.23 | 3.86 | 72.9 |
