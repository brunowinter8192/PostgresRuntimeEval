# Query Prediction Report (Hybrid_2)

**Query:** Q18_104_seed_845015193
**Timestamp:** 2025-12-10 19:29:58

## Pattern Assignments

**Total Patterns Matched:** 3

| Root Node | Pattern Hash | Pattern String |
|-----------|--------------|----------------|
| 28884 | e296a71f8301... | Limit -> Sort (Outer) |
| 28886 | 2724c08067c0... | Aggregate -> Gather Merge (Outer) |
| 28891 | 3e2d5a00246f... | Sort -> Hash Join (Outer) |

## Query Tree

```
Node 28884 (Limit) [PATTERN ROOT] - ROOT
  Node 28885 (Sort) [consumed]
    Node 28886 (Aggregate) [PATTERN ROOT]
      Node 28887 (Gather Merge) [consumed]
        Node 28888 (Incremental Sort)
          Node 28889 (Nested Loop)
            Node 28890 (Merge Join)
              Node 28891 (Sort) [PATTERN ROOT]
                Node 28892 (Hash Join) [consumed]
                  Node 28893 (Seq Scan)
                  Node 28894 (Hash)
                    Node 28895 (Aggregate)
                      Node 28896 (Index Scan)
              Node 28897 (Sort)
                Node 28898 (Seq Scan)
            Node 28899 (Index Scan)
```

## Prediction Chain (Bottom-Up)

### Step 1 (depth 11): Operator Fallback

- **Node:** 28896 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.08, rt=0.03

### Step 2 (depth 10): Operator Fallback

- **Node:** 28895 (Aggregate)
- **Reason:** No pattern match
- **Output:** st=893.00, rt=952.32

### Step 3 (depth 9): Operator Fallback

- **Node:** 28893 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.43, rt=154.81

### Step 4 (depth 9): Operator Fallback

- **Node:** 28894 (Hash)
- **Reason:** No pattern match
- **Output:** st=240.68, rt=240.68

### Step 5 (depth 8): Operator Fallback

- **Node:** 28898 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.09, rt=10.98

### Step 6 (depth 7): Pattern Match

- **Pattern:** Sort -> Hash Join (Outer)
- **Hash:** 3e2d5a00246ff56483c16003698d4917
- **Root:** Node 28891 (Sort)
- **Consumed Children:** Node 28892 (Hash Join)
- **Output:** st=1317.94, rt=1317.97

### Step 7 (depth 7): Operator Fallback

- **Node:** 28897 (Sort)
- **Reason:** No pattern match
- **Output:** st=961.43, rt=962.21

### Step 8 (depth 6): Operator Fallback

- **Node:** 28890 (Merge Join)
- **Reason:** No pattern match
- **Output:** st=2906.46, rt=2908.48

### Step 9 (depth 6): Operator Fallback

- **Node:** 28899 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.02, rt=0.03

### Step 10 (depth 5): Operator Fallback

- **Node:** 28889 (Nested Loop)
- **Reason:** No pattern match
- **Output:** st=345.36, rt=1446.41

### Step 11 (depth 4): Operator Fallback

- **Node:** 28888 (Incremental Sort)
- **Reason:** No pattern match
- **Output:** st=2909.82, rt=2909.82

### Step 12 (depth 2): Pattern Match

- **Pattern:** Aggregate -> Gather Merge (Outer)
- **Hash:** 2724c08067c017e6455632f46231780c
- **Root:** Node 28886 (Aggregate)
- **Consumed Children:** Node 28887 (Gather Merge)
- **Output:** st=1237.20, rt=1241.42

### Step 13 (depth 0): Pattern Match

- **Pattern:** Limit -> Sort (Outer)
- **Hash:** e296a71f830144e9c017d1502a6dcc01
- **Root:** Node 28884 (Limit)
- **Consumed Children:** Node 28885 (Sort)
- **Output:** st=2106.85, rt=2110.51

## Prediction Results

| Node | Type | Depth | Pred Type | Actual RT | Pred RT | MRE (%) |
|------|------|-------|-----------|-----------|---------|---------|
| 28884 | Limit | 0 | pattern | 3069.47 | 2110.51 | 31.2 |
| 28886 | Aggregate | 2 | pattern | 2950.89 | 1241.42 | 57.9 |
| 28888 | Incremental Sort | 4 | operator | 2931.48 | 2909.82 | 0.7 |
| 28889 | Nested Loop | 5 | operator | 2931.43 | 1446.41 | 50.7 |
| 28890 | Merge Join | 6 | operator | 2931.36 | 2908.48 | 0.8 |
| 28899 | Index Scan | 6 | operator | 0.02 | 0.03 | 16.4 |
| 28891 | Sort | 7 | pattern | 2860.45 | 1317.97 | 53.9 |
| 28897 | Sort | 7 | operator | 68.05 | 962.21 | 1313.9 |
| 28898 | Seq Scan | 8 | operator | 55.24 | 10.98 | 80.1 |
| 28893 | Seq Scan | 9 | operator | 198.46 | 154.81 | 22.0 |
| 28894 | Hash | 9 | operator | 2632.27 | 240.68 | 90.9 |
| 28895 | Aggregate | 10 | operator | 2632.22 | 952.32 | 63.8 |
| 28896 | Index Scan | 11 | operator | 2124.96 | 0.03 | 100.0 |
