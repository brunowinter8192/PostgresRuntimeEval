# Query Prediction Report (Hybrid_2)

**Query:** Q5_109_seed_886035348
**Timestamp:** 2025-12-15 16:09:25

## Pattern Assignments

**Total Patterns Matched:** 3

| Root Node | Pattern Hash | Pattern String |
|-----------|--------------|----------------|
| 7082 | 2724c08067c0... | Aggregate -> Gather Merge (Outer) |
| 7096 | 3aab37bea1a8... | Hash -> Seq Scan (Outer) |
| 7099 | 3aab37bea1a8... | Hash -> Seq Scan (Outer) |

## Query Tree

```
Node 7081 (Sort) - ROOT
  Node 7082 (Aggregate) [PATTERN ROOT]
    Node 7083 (Gather Merge) [consumed]
      Node 7084 (Aggregate)
        Node 7085 (Sort)
          Node 7086 (Hash Join)
            Node 7087 (Nested Loop)
              Node 7088 (Hash Join)
                Node 7089 (Seq Scan)
                Node 7090 (Hash)
                  Node 7091 (Hash Join)
                    Node 7092 (Seq Scan)
                    Node 7093 (Hash)
                      Node 7094 (Hash Join)
                        Node 7095 (Seq Scan)
                        Node 7096 (Hash) [PATTERN ROOT]
                          Node 7097 (Seq Scan) [consumed]
              Node 7098 (Index Scan)
            Node 7099 (Hash) [PATTERN ROOT]
              Node 7100 (Seq Scan) [consumed]
```

## Prediction Chain (Bottom-Up)

### Step 1 (depth 12): Operator Fallback

- **Node:** 7095 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.05, rt=6.66

### Step 2 (depth 12): Pattern Match

- **Pattern:** Hash -> Seq Scan (Outer)
- **Hash:** 3aab37bea1a884da206eb32f2c1ae5ba
- **Root:** Node 7096 (Hash)
- **Consumed Children:** Node 7097 (Seq Scan)
- **Output:** st=0.03, rt=0.03

### Step 3 (depth 11): Operator Fallback

- **Node:** 7094 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=2.15, rt=66.19

### Step 4 (depth 10): Operator Fallback

- **Node:** 7092 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.25, rt=31.37

### Step 5 (depth 10): Operator Fallback

- **Node:** 7093 (Hash)
- **Reason:** No pattern match
- **Output:** st=18.13, rt=18.13

### Step 6 (depth 9): Operator Fallback

- **Node:** 7091 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=5.23, rt=75.97

### Step 7 (depth 8): Operator Fallback

- **Node:** 7089 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.20, rt=163.38

### Step 8 (depth 8): Operator Fallback

- **Node:** 7090 (Hash)
- **Reason:** No pattern match
- **Output:** st=29.28, rt=29.28

### Step 9 (depth 7): Operator Fallback

- **Node:** 7088 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=28.68, rt=184.68

### Step 10 (depth 7): Operator Fallback

- **Node:** 7098 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.07, rt=0.06

### Step 11 (depth 6): Operator Fallback

- **Node:** 7087 (Nested Loop)
- **Reason:** No pattern match
- **Output:** st=53.24, rt=1077.13

### Step 12 (depth 6): Pattern Match

- **Pattern:** Hash -> Seq Scan (Outer)
- **Hash:** 3aab37bea1a884da206eb32f2c1ae5ba
- **Root:** Node 7099 (Hash)
- **Consumed Children:** Node 7100 (Seq Scan)
- **Output:** st=0.77, rt=0.82

### Step 13 (depth 5): Operator Fallback

- **Node:** 7086 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=55.38, rt=1101.38

### Step 14 (depth 4): Operator Fallback

- **Node:** 7085 (Sort)
- **Reason:** No pattern match
- **Output:** st=1075.46, rt=1076.88

### Step 15 (depth 3): Operator Fallback

- **Node:** 7084 (Aggregate)
- **Reason:** No pattern match
- **Output:** st=1059.51, rt=1073.32

### Step 16 (depth 1): Pattern Match

- **Pattern:** Aggregate -> Gather Merge (Outer)
- **Hash:** 2724c08067c017e6455632f46231780c
- **Root:** Node 7082 (Aggregate)
- **Consumed Children:** Node 7083 (Gather Merge)
- **Output:** st=1087.96, rt=1090.78

### Step 17 (depth 0): Operator Fallback

- **Node:** 7081 (Sort)
- **Reason:** No pattern match
- **Output:** st=1125.00, rt=1126.99

## Prediction Results

| Node | Type | Depth | Pred Type | Actual RT | Pred RT | MRE (%) |
|------|------|-------|-----------|-----------|---------|---------|
| 7081 | Sort | 0 | operator | 1058.77 | 1126.99 | 6.4 |
| 7082 | Aggregate | 1 | pattern | 1058.75 | 1090.78 | 3.0 |
| 7084 | Aggregate | 3 | operator | 1053.66 | 1073.32 | 1.9 |
| 7085 | Sort | 4 | operator | 1053.40 | 1076.88 | 2.2 |
| 7086 | Hash Join | 5 | operator | 1052.91 | 1101.38 | 4.6 |
| 7087 | Nested Loop | 6 | operator | 1041.68 | 1077.13 | 3.4 |
| 7099 | Hash | 6 | pattern | 3.21 | 0.82 | 74.5 |
| 7088 | Hash Join | 7 | operator | 218.19 | 184.68 | 15.4 |
| 7098 | Index Scan | 7 | operator | 0.07 | 0.06 | 16.1 |
| 7089 | Seq Scan | 8 | operator | 166.70 | 163.38 | 2.0 |
| 7090 | Hash | 8 | operator | 37.88 | 29.28 | 22.7 |
| 7091 | Hash Join | 9 | operator | 36.91 | 75.97 | 105.8 |
| 7092 | Seq Scan | 10 | operator | 35.50 | 31.37 | 11.6 |
| 7093 | Hash | 10 | operator | 0.08 | 18.13 | 22279.5 |
| 7094 | Hash Join | 11 | operator | 0.08 | 66.19 | 85856.1 |
| 7095 | Seq Scan | 12 | operator | 0.01 | 6.66 | 95012.3 |
| 7096 | Hash | 12 | pattern | 0.06 | 0.03 | 52.4 |
