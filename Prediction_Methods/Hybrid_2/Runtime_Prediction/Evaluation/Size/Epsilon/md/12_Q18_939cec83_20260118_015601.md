# Query Prediction Report (Hybrid_2)

**Query:** Q18_109_seed_886035348
**Timestamp:** 2026-01-18 01:56:01

## Pattern Assignments

**Total Patterns Matched:** 1

| Root Node | Pattern Hash | Pattern String |
|-----------|--------------|----------------|
| 28964 | 6ce7e974aa30... | Limit -> Sort -> Aggregate -> Gather Merge -> Incremental Sort (Outer) (Outer) (Outer) (Outer) |

## Query Tree

```
Node 28964 (Limit) [PATTERN ROOT] - ROOT
  Node 28965 (Sort) [consumed]
    Node 28966 (Aggregate) [consumed]
      Node 28967 (Gather Merge) [consumed]
        Node 28968 (Incremental Sort) [consumed]
          Node 28969 (Nested Loop)
            Node 28970 (Merge Join)
              Node 28971 (Sort)
                Node 28972 (Hash Join)
                  Node 28973 (Seq Scan)
                  Node 28974 (Hash)
                    Node 28975 (Aggregate)
                      Node 28976 (Index Scan)
              Node 28977 (Sort)
                Node 28978 (Seq Scan)
            Node 28979 (Index Scan)
```

## Prediction Chain (Bottom-Up)

### Step 1 (depth 11): Operator Fallback

- **Node:** 28976 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.08, rt=0.03

### Step 2 (depth 10): Operator Fallback

- **Node:** 28975 (Aggregate)
- **Reason:** No pattern match
- **Output:** st=895.47, rt=951.90

### Step 3 (depth 9): Operator Fallback

- **Node:** 28973 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.47, rt=154.54

### Step 4 (depth 9): Operator Fallback

- **Node:** 28974 (Hash)
- **Reason:** No pattern match
- **Output:** st=225.03, rt=225.03

### Step 5 (depth 8): Operator Fallback

- **Node:** 28972 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=158.59, rt=751.90

### Step 6 (depth 8): Operator Fallback

- **Node:** 28978 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.09, rt=10.74

### Step 7 (depth 7): Operator Fallback

- **Node:** 28971 (Sort)
- **Reason:** No pattern match
- **Output:** st=1004.33, rt=1004.99

### Step 8 (depth 7): Operator Fallback

- **Node:** 28977 (Sort)
- **Reason:** No pattern match
- **Output:** st=965.14, rt=965.68

### Step 9 (depth 6): Operator Fallback

- **Node:** 28970 (Merge Join)
- **Reason:** No pattern match
- **Output:** st=2906.67, rt=2909.08

### Step 10 (depth 6): Operator Fallback

- **Node:** 28979 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.02, rt=0.03

### Step 11 (depth 5): Operator Fallback

- **Node:** 28969 (Nested Loop)
- **Reason:** No pattern match
- **Output:** st=328.90, rt=1422.85

### Step 12 (depth 0): Pattern Match

- **Pattern:** Limit -> Sort -> Aggregate -> Gather Merge -> Incremental Sort (Outer) (Outer) (Outer) (Outer)
- **Hash:** 6ce7e974aa30f1caf54ace9e0ea18109
- **Root:** Node 28964 (Limit)
- **Consumed Children:** Node 28965 (Sort), Node 28966 (Aggregate), Node 28967 (Gather Merge), Node 28968 (Incremental Sort)
- **Output:** st=3042.56, rt=3049.77

## Prediction Results

| Node | Type | Depth | Pred Type | Actual RT | Pred RT | MRE (%) |
|------|------|-------|-----------|-----------|---------|---------|
| 28964 | Limit | 0 | pattern | 3030.15 | 3049.77 | 0.6 |
| 28969 | Nested Loop | 5 | operator | 2880.15 | 1422.85 | 50.6 |
| 28970 | Merge Join | 6 | operator | 2880.10 | 2909.08 | 1.0 |
| 28979 | Index Scan | 6 | operator | 0.02 | 0.03 | 38.5 |
| 28971 | Sort | 7 | operator | 2829.65 | 1004.99 | 64.5 |
| 28977 | Sort | 7 | operator | 64.72 | 965.68 | 1392.0 |
| 28972 | Hash Join | 8 | operator | 2829.64 | 751.90 | 73.4 |
| 28978 | Seq Scan | 8 | operator | 53.41 | 10.74 | 79.9 |
| 28973 | Seq Scan | 9 | operator | 188.23 | 154.54 | 17.9 |
| 28974 | Hash | 9 | operator | 2612.43 | 225.03 | 91.4 |
| 28975 | Aggregate | 10 | operator | 2612.39 | 951.90 | 63.6 |
| 28976 | Index Scan | 11 | operator | 2116.01 | 0.03 | 100.0 |
