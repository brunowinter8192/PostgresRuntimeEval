# Query Prediction Report (Hybrid_2)

**Query:** Q9_101_seed_820403100
**Timestamp:** 2025-12-20 22:56:04

## Pattern Assignments

**Total Patterns Matched:** 1

| Root Node | Pattern Hash | Pattern String |
|-----------|--------------|----------------|
| 16671 | a5f39f08c510... | Aggregate -> Gather -> Aggregate (Outer) (Outer) |

## Query Tree

```
Node 16670 (Sort) - ROOT
  Node 16671 (Aggregate) [PATTERN ROOT]
    Node 16672 (Gather) [consumed]
      Node 16673 (Aggregate) [consumed]
        Node 16674 (Nested Loop)
          Node 16675 (Hash Join)
            Node 16676 (Seq Scan)
            Node 16677 (Hash)
              Node 16678 (Hash Join)
                Node 16679 (Hash Join)
                  Node 16680 (Nested Loop)
                    Node 16681 (Seq Scan)
                    Node 16682 (Index Scan)
                  Node 16683 (Hash)
                    Node 16684 (Seq Scan)
                Node 16685 (Hash)
                  Node 16686 (Seq Scan)
          Node 16687 (Index Scan)
```

## Prediction Chain (Bottom-Up)

### Step 1 (depth 10): Operator Fallback

- **Node:** 16681 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 2 (depth 10): Operator Fallback

- **Node:** 16682 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 3 (depth 10): Operator Fallback

- **Node:** 16684 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 4 (depth 9): Operator Fallback

- **Node:** 16680 (Nested Loop)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 5 (depth 9): Operator Fallback

- **Node:** 16683 (Hash)
- **Reason:** No pattern match
- **Output:** st=15.85, rt=15.85

### Step 6 (depth 9): Operator Fallback

- **Node:** 16686 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 7 (depth 8): Operator Fallback

- **Node:** 16679 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 8 (depth 8): Operator Fallback

- **Node:** 16685 (Hash)
- **Reason:** No pattern match
- **Output:** st=14.92, rt=14.92

### Step 9 (depth 7): Operator Fallback

- **Node:** 16678 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 10 (depth 6): Operator Fallback

- **Node:** 16676 (Seq Scan)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 11 (depth 6): Operator Fallback

- **Node:** 16677 (Hash)
- **Reason:** No pattern match
- **Output:** st=25.30, rt=25.30

### Step 12 (depth 5): Operator Fallback

- **Node:** 16675 (Hash Join)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 13 (depth 5): Operator Fallback

- **Node:** 16687 (Index Scan)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 14 (depth 4): Operator Fallback

- **Node:** 16674 (Nested Loop)
- **Reason:** No pattern match
- **Output:** st=0.00, rt=0.00

### Step 15 (depth 1): Pattern Match

- **Pattern:** Aggregate -> Gather -> Aggregate (Outer) (Outer)
- **Hash:** a5f39f08c510532e02e96e109e48c0cd
- **Root:** Node 16671 (Aggregate)
- **Consumed Children:** Node 16672 (Gather), Node 16673 (Aggregate)
- **Output:** st=816.26, rt=822.02

### Step 16 (depth 0): Operator Fallback

- **Node:** 16670 (Sort)
- **Reason:** No pattern match
- **Output:** st=1110.65, rt=1111.37

## Prediction Results

| Node | Type | Depth | Pred Type | Actual RT | Pred RT | MRE (%) |
|------|------|-------|-----------|-----------|---------|---------|
| 16670 | Sort | 0 | operator | 1185.67 | 1111.37 | 6.3 |
| 16671 | Aggregate | 1 | pattern | 1185.53 | 822.02 | 30.7 |
| 16674 | Nested Loop | 4 | operator | 1141.88 | 0.00 | 100.0 |
| 16675 | Hash Join | 5 | operator | 973.23 | 0.00 | 100.0 |
| 16687 | Index Scan | 5 | operator | 0.00 | 0.00 | 100.0 |
| 16676 | Seq Scan | 6 | operator | 698.41 | 0.00 | 100.0 |
| 16677 | Hash | 6 | operator | 180.74 | 25.30 | 86.0 |
| 16678 | Hash Join | 7 | operator | 178.65 | 0.00 | 100.0 |
| 16679 | Hash Join | 8 | operator | 164.96 | 0.00 | 100.0 |
| 16685 | Hash | 8 | operator | 13.06 | 14.92 | 14.3 |
| 16680 | Nested Loop | 9 | operator | 158.28 | 0.00 | 100.0 |
| 16683 | Hash | 9 | operator | 4.22 | 15.85 | 275.2 |
| 16686 | Seq Scan | 9 | operator | 13.05 | 0.00 | 100.0 |
| 16681 | Seq Scan | 10 | operator | 21.08 | 0.00 | 100.0 |
| 16682 | Index Scan | 10 | operator | 0.07 | 0.00 | 100.0 |
| 16684 | Seq Scan | 10 | operator | 3.62 | 0.00 | 100.0 |
